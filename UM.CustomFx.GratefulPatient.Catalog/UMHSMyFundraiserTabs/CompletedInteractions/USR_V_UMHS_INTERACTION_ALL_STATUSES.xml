<SQLViewSpec
	xmlns="bb_appfx_sqlview"
	xmlns:t="bb_appfx_table"
	xmlns:c="bb_appfx_commontypes" 	
	ID="e5cbccc1-f1b2-4821-8825-e0976d8791cd"
	Name="MIMED Interactions (All statuses included)"
	Description="Same as V_UMHS_INTERACTION view, but with *no* filter on the INTERACTION.STATUSCODE field"
	Author="UM Dev"
	DBViewName="USR_V_UMHS_INTERACTION_ALL_STATUSES"
	>

	<CreateViewSQL>
		<![CDATA[
CREATE view [dbo].[USR_V_UMHS_INTERACTION_ALL_STATUSES] as 
  select
    INTERACTION.ID,
    INTERACTION.UMHSID,
    INTERACTION.CONTACTMETHODCODEID,
    INTERACTION.SUMMARY OBJECTIVE,
    INTERACTION.FUNDRAISERID,
    INTERACTION.DATE,
    INTERACTION.EXPECTEDDATE,
    INTERACTION.ACTUALDATE,
    INTERACTION.COMPLETED,
    INTERACTION.DATEADDED,
    INTERACTION.DATECHANGED,
    INTERACTION.ADDEDBYID,
    INTERACTION.CHANGEDBYID,
    INTERACTION.TSLONG,
    INTERACTION.COMMENT,
    INTERACTION.EVENTID,
    INTERACTION.INTERACTIONSUBCATEGORYID,
    --INTERACTION.LOOKUPID,
    UIS.DESCRIPTION AS STATUS,
    INTERACTION.PROSPECTPLANID,
    INTERACTION.EXPECTEDSTARTTIME as STARTTIME,
    INTERACTION.EXPECTEDENDTIME as ENDTIME,
    INTERACTION.TIMEZONEENTRYID,
    case
      when INTERACTION.PROSPECTPLANID is null then 0
      else 1
    end as INTERACTIONBASETYPE,
    null as STEWARDSHIPSTEPCATEGORYCODEID,
    null as CONTACTPERSONID,
    null as STEWARDSHIPPLANID,
    INTERACTION.STATUSCODEID
  from  dbo.USR_UMHS_INTERACTION INTERACTION
    left join dbo.INTERACTIONSUBCATEGORY on INTERACTIONSUBCATEGORY.ID = INTERACTION.INTERACTIONSUBCATEGORYID
    left join dbo.INTERACTIONCATEGORY on INTERACTIONCATEGORY.ID = INTERACTIONSUBCATEGORY.INTERACTIONCATEGORYID
    left join dbo.USR_INTERACTION_STATUSCODE UIS on UIS.ID = INTERACTION.STATUSCODEID
		]]>
	</CreateViewSQL>

</SQLViewSpec>
